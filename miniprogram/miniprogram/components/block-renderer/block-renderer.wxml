<!--
  block-renderer 组件
  报告内容块渲染器
  支持类型：paragraph, heading, list, chart, table, divider
-->
<view class="block {{block.type}}">
  <!-- 段落 -->
  <view wx:if="{{block.type === 'paragraph'}}" class="block-paragraph">
    <text>{{block.content}}</text>
  </view>
  
  <!-- 标题 -->
  <view wx:elif="{{block.type === 'heading'}}" class="block-heading level-{{block.level || 2}}">
    <text>{{block.content}}</text>
  </view>
  
  <!-- 列表 -->
  <view wx:elif="{{block.type === 'list'}}" class="block-list {{block.ordered ? 'ordered' : 'unordered'}}">
    <view 
      wx:for="{{block.items}}" 
      wx:key="index" 
      class="list-item"
    >
      <text class="list-marker">{{block.ordered ? index + 1 + '.' : '•'}}</text>
      <text class="list-content">{{item}}</text>
    </view>
  </view>
  
  <!-- 图表 -->
  <view wx:elif="{{block.type === 'chart'}}" class="block-chart">
    <view wx:if="{{block.title}}" class="chart-title">
      <text>{{block.title}}</text>
    </view>
    <chart-renderer
      option="{{block.option}}"
      height="{{block.height || 400}}"
      lazy-load="{{true}}"
    />
  </view>
  
  <!-- 表格 -->
  <view wx:elif="{{block.type === 'table'}}" class="block-table">
    <view wx:if="{{block.title}}" class="table-title">
      <text>{{block.title}}</text>
    </view>
    <scroll-view scroll-x class="table-scroll">
      <view class="table-wrapper">
        <!-- 表头 -->
        <view wx:if="{{block.headers}}" class="table-row table-header">
          <view 
            wx:for="{{block.headers}}" 
            wx:key="index" 
            class="table-cell"
          >
            <text>{{item}}</text>
          </view>
        </view>
        <!-- 表体 -->
        <view 
          wx:for="{{block.rows}}" 
          wx:key="rowIndex" 
          class="table-row"
          wx:for-index="rowIndex"
        >
          <view 
            wx:for="{{item}}" 
            wx:key="cellIndex" 
            class="table-cell"
            wx:for-item="cell"
            wx:for-index="cellIndex"
          >
            <text>{{cell}}</text>
          </view>
        </view>
      </view>
    </scroll-view>
  </view>
  
  <!-- 分隔线 -->
  <view wx:elif="{{block.type === 'divider'}}" class="block-divider"></view>
  
  <!-- 引用 -->
  <view wx:elif="{{block.type === 'quote'}}" class="block-quote">
    <text>{{block.content}}</text>
  </view>
  
  <!-- 高亮卡片 -->
  <view wx:elif="{{block.type === 'highlight'}}" class="block-highlight {{block.variant || 'info'}}">
    <view wx:if="{{block.title}}" class="highlight-title">
      <text>{{block.title}}</text>
    </view>
    <text class="highlight-content">{{block.content}}</text>
  </view>
  
  <!-- 未知类型 -->
  <view wx:else class="block-unknown">
    <text>不支持的内容类型: {{block.type}}</text>
  </view>
</view>
